<!DOCTYPE html>
<html lang="en-us">
<title>你的代码不干净 | 子不语</title>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.90.1" />
<meta name="description" content="分享了咨询项目中一个有意思的和客户对话场景，探讨一个代码实现细节中客户关注却不重要的内容">
<meta name="baidu-site-verification" content="AAd4ZRAjIO">
<meta name="keywords" content="整洁代码, 咨询">
<meta name="robots" content="index,follow"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="apple-touch-icon" sizes="180x180" href="https://ddou.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://ddou.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://ddou.github.io/favicon-16x16.png">
<link rel="manifest" href="https://ddou.github.io/site.webmanifest">
<link rel="stylesheet" href="https://ddou.github.io/css/minimal.css">
<link rel="canonical" href="https://ddou.github.io/posts/clean-code-discussion/">
<link rel="alternate" type="application/rss+xml" href="" title="子不语">

<header>
  
    <a href="https://ddou.github.io/" class="title">子不语</a>
  
  
    <nav>
    
      <a href="https://ddou.github.io/">文章</a>
    
      <a href="https://ddou.github.io/tags/">标签</a>
    
      <a href="https://ddou.github.io/about/">关于</a>
    
      <a href="https://ddou.github.io/index.xml">订阅</a>
    
    </nav>
  
</header>

<article>
  <header>
    <h1>你的代码不干净</h1>
    <time
      datetime="2019-07-23T15:34:30&#43;08:00">July 23, 2019</time>
      

<small><code><a href="https://ddou.github.io/tags/consulting">Consulting</a></code></small>

  </header>
  <p><img src="https://ws1.sinaimg.cn/large/5ee78c28ly1g59utz2ah7j20qo0gon20.jpg" alt=""></p>
<p>“你这个代码写的不 clean 呀， 你看这里的 order 是个 double 类型的， 为什么不用整型的呢？”。在一次讨论中，对方给出这么个结论。</p>
<p>关于设计的讨论基本是程序员的日常。在讨论中，各种“大帽子”会飞过来,飞过去， Clean、SOLID、扩展性、可测试性、复杂度等等。如果对“帽子”本身的内涵不理解，被扣帽子的人就么办法做出合理的为自己的代码辩护。扣帽子的人则是在调皮捣蛋。 比如上面的场景，clean 是指什么？当对方说代码不 clean 的时候，他又在指什么？</p>
<p>按照需求，页面上需要显示出一系列表单控件，order 则标记着各个控件的显示顺序。实际实现中，每个控件实例有个 order 属性，按照 order 排序后，逐个显示即满足需求。上面的实现是能完全满足 Kent Beck 在简单设计(Simple design)中提高的 4 个要求的:</p>
<ul>
<li>测试通过</li>
<li>明确表达代码意图</li>
<li>没有重复</li>
<li>最小化实现，没有冗余</li>
</ul>
<p>额外的好处，就是简单，易理解， 维护也方便。当有更多的组件需要插入到现有列表中时，也总是可以找到一个位置。另外，即使如对方所言换成整型，也没有本质的区别。</p>
<p>按照我们对整洁代码的理解，这个实现是满足要求的。但对方指的不 clean, 具体是什么呢？是不满足需求？还是有其他隐情？真相是作为非技术人员，对方只是纯粹觉得整数比带小数点的浮点数更“干净”！</p>
<p>这就是典型的讨论双方对 clean 没有共识，也就是所谓的鸡同鸭讲。这时，就需要理解内涵的一方开始耐心的科普：首先我们定义一下什么是 X, 然后再讨论为什么 Y 不 X。</p>
<p>好的程序员，不仅要有一双巧手写出优雅的代码，还要缜密理论知识织就的铁布衫，随时抵御飞来的大帽子。</p>

</article>

<script src="https://utteranc.es/client.js"
        repo="ddou/ddou.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

<style>
    div.utterances {
        max-width: 80%;
        width: 60%;
    }
</style>

<script>
    (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-40664887-1' , { 'siteSpeedSampleRate': 100 });
    ga('send', 'pageview');
    ga('set', 'anonymizeIp', true);
</script>



</html>
